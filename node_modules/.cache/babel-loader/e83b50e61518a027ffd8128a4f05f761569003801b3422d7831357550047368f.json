{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'../styles/kkomap.scss';// 실제 버전 및 integrity 값으로 교체하세요.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const KAKAO_JS_SDK_VERSION='https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js';const KAKAO_JS_SDK_INTEGRITY='sha384-DKYJZ8NLiK8MN4/C5P2dtSmLQ4KwPaoqAfyA/DfmEc1VDxu4yyC7wy6K1Hs90nka';const KakaoMapSearch=()=>{const[map,setMap]=useState(null);const[scriptLoaded,setScriptLoaded]=useState(false);const addressRef=useRef(null);const mapContainerRef=useRef(null);// 카카오맵 API 스크립트와 카카오 JS SDK 스크립트를 동적으로 로드합니다.\nuseEffect(()=>{// 1. 카카오맵 API 스크립트 로드\nif(!document.getElementById('kakao-map-script')){const mapScript=document.createElement('script');mapScript.id='kakao-map-script';mapScript.src='https://dapi.kakao.com/v2/maps/sdk.js?appkey=80d68b9c1c97f9edd72ef5e13725bb51&libraries=services';mapScript.async=true;mapScript.onload=()=>setScriptLoaded(true);document.body.appendChild(mapScript);}else{setScriptLoaded(true);}// 2. 카카오 JS SDK 스크립트 로드\nif(!document.getElementById('kakao-js-sdk')){const sdkScript=document.createElement('script');sdkScript.id='kakao-js-sdk';sdkScript.src=`https://t1.kakaocdn.net/kakao_js_sdk/${KAKAO_JS_SDK_VERSION}/kakao.min.js`;sdkScript.integrity=KAKAO_JS_SDK_INTEGRITY;sdkScript.crossOrigin='anonymous';sdkScript.async=true;document.body.appendChild(sdkScript);}},[]);// 지도를 생성하는 함수\nconst createMap=()=>{if(!scriptLoaded){alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');return;}const{kakao}=window;const container=mapContainerRef.current;container.style.display='block';const options={center:new kakao.maps.LatLng(37.566826,126.9786567),level:5};const newMap=new kakao.maps.Map(container,options);setMap(newMap);newMap.relayout();return newMap;};// 검색 결과의 각 장소에 대해 마커를 생성합니다.\nconst displayMarker=(place,currentMap)=>{const{kakao}=window;const marker=new kakao.maps.Marker({map:currentMap,position:new kakao.maps.LatLng(place.y,place.x)});kakao.maps.event.addListener(marker,'click',function(){const infowindow=new kakao.maps.InfoWindow({zIndex:1});infowindow.setContent(`<div style=\"padding:5px;font-size:12px;\">${place.place_name}</div>`);infowindow.open(currentMap,marker);});};// 검색 결과를 처리하고 지도 범위를 설정합니다.\nconst placesSearchCB=(data,status,pagination,currentMap)=>{const{kakao}=window;if(status===kakao.maps.services.Status.OK){const bounds=new kakao.maps.LatLngBounds();for(let i=0;i<data.length;i++){displayMarker(data[i],currentMap);bounds.extend(new kakao.maps.LatLng(data[i].y,data[i].x));}currentMap.setBounds(bounds);currentMap.relayout();}else{alert('검색 결과가 없습니다.');}};// 검색 버튼 클릭 핸들러\nconst handleSearch=()=>{const address=addressRef.current.value.trim();if(!address){alert('주소를 입력하세요.');return;}if(!scriptLoaded){alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');return;}const{kakao}=window;const currentMap=map?map:createMap();const ps=new kakao.maps.services.Places();ps.keywordSearch(address,(data,status,pagination)=>placesSearchCB(data,status,pagination,currentMap));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"map\",children:\"\\uCE74\\uCE74\\uC624\\uB9F5 \\uC7A5\\uC18C \\uAC80\\uC0C9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address\",ref:addressRef,placeholder:\"\\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{id:\"searchButton\",onClick:handleSearch,children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"map\",ref:mapContainerRef})]})]});};export default KakaoMapSearch;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","KAKAO_JS_SDK_VERSION","KAKAO_JS_SDK_INTEGRITY","KakaoMapSearch","map","setMap","scriptLoaded","setScriptLoaded","addressRef","mapContainerRef","document","getElementById","mapScript","createElement","id","src","async","onload","body","appendChild","sdkScript","integrity","crossOrigin","createMap","alert","kakao","window","container","current","style","display","options","center","maps","LatLng","level","newMap","Map","relayout","displayMarker","place","currentMap","marker","Marker","position","y","x","event","addListener","infowindow","InfoWindow","zIndex","setContent","place_name","open","placesSearchCB","data","status","pagination","services","Status","OK","bounds","LatLngBounds","i","length","extend","setBounds","handleSearch","address","value","trim","ps","Places","keywordSearch","children","className","type","ref","placeholder","onClick"],"sources":["C:/nailmall/src/pages/KakaoMapSearch.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport '../styles/kkomap.scss';\r\n\r\n// 실제 버전 및 integrity 값으로 교체하세요.\r\nconst KAKAO_JS_SDK_VERSION = 'https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js';\r\nconst KAKAO_JS_SDK_INTEGRITY = 'sha384-DKYJZ8NLiK8MN4/C5P2dtSmLQ4KwPaoqAfyA/DfmEc1VDxu4yyC7wy6K1Hs90nka';\r\n\r\nconst KakaoMapSearch = () => {\r\n  const [map, setMap] = useState(null);\r\n  const [scriptLoaded, setScriptLoaded] = useState(false);\r\n  const addressRef = useRef(null);\r\n  const mapContainerRef = useRef(null);\r\n\r\n  // 카카오맵 API 스크립트와 카카오 JS SDK 스크립트를 동적으로 로드합니다.\r\n  useEffect(() => {\r\n    // 1. 카카오맵 API 스크립트 로드\r\n    if (!document.getElementById('kakao-map-script')) {\r\n      const mapScript = document.createElement('script');\r\n      mapScript.id = 'kakao-map-script';\r\n      mapScript.src =\r\n        'https://dapi.kakao.com/v2/maps/sdk.js?appkey=80d68b9c1c97f9edd72ef5e13725bb51&libraries=services';\r\n      mapScript.async = true;\r\n      mapScript.onload = () => setScriptLoaded(true);\r\n      document.body.appendChild(mapScript);\r\n    } else {\r\n      setScriptLoaded(true);\r\n    }\r\n\r\n    // 2. 카카오 JS SDK 스크립트 로드\r\n    if (!document.getElementById('kakao-js-sdk')) {\r\n      const sdkScript = document.createElement('script');\r\n      sdkScript.id = 'kakao-js-sdk';\r\n      sdkScript.src = `https://t1.kakaocdn.net/kakao_js_sdk/${KAKAO_JS_SDK_VERSION}/kakao.min.js`;\r\n      sdkScript.integrity = KAKAO_JS_SDK_INTEGRITY;\r\n      sdkScript.crossOrigin = 'anonymous';\r\n      sdkScript.async = true;\r\n      document.body.appendChild(sdkScript);\r\n    }\r\n  }, []);\r\n\r\n  // 지도를 생성하는 함수\r\n  const createMap = () => {\r\n    if (!scriptLoaded) {\r\n      alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');\r\n      return;\r\n    }\r\n    const { kakao } = window;\r\n    const container = mapContainerRef.current;\r\n    container.style.display = 'block';\r\n    const options = {\r\n      center: new kakao.maps.LatLng(37.566826, 126.9786567),\r\n      level: 5,\r\n    };\r\n    const newMap = new kakao.maps.Map(container, options);\r\n    setMap(newMap);\r\n    newMap.relayout();\r\n    return newMap;\r\n  };\r\n\r\n  // 검색 결과의 각 장소에 대해 마커를 생성합니다.\r\n  const displayMarker = (place, currentMap) => {\r\n    const { kakao } = window;\r\n    const marker = new kakao.maps.Marker({\r\n      map: currentMap,\r\n      position: new kakao.maps.LatLng(place.y, place.x),\r\n    });\r\n    kakao.maps.event.addListener(marker, 'click', function () {\r\n      const infowindow = new kakao.maps.InfoWindow({ zIndex: 1 });\r\n      infowindow.setContent(\r\n        `<div style=\"padding:5px;font-size:12px;\">${place.place_name}</div>`\r\n      );\r\n      infowindow.open(currentMap, marker);\r\n    });\r\n  };\r\n\r\n  // 검색 결과를 처리하고 지도 범위를 설정합니다.\r\n  const placesSearchCB = (data, status, pagination, currentMap) => {\r\n    const { kakao } = window;\r\n    if (status === kakao.maps.services.Status.OK) {\r\n      const bounds = new kakao.maps.LatLngBounds();\r\n      for (let i = 0; i < data.length; i++) {\r\n        displayMarker(data[i], currentMap);\r\n        bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\r\n      }\r\n      currentMap.setBounds(bounds);\r\n      currentMap.relayout();\r\n    } else {\r\n      alert('검색 결과가 없습니다.');\r\n    }\r\n  };\r\n\r\n  // 검색 버튼 클릭 핸들러\r\n  const handleSearch = () => {\r\n    const address = addressRef.current.value.trim();\r\n    if (!address) {\r\n      alert('주소를 입력하세요.');\r\n      return;\r\n    }\r\n    if (!scriptLoaded) {\r\n      alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');\r\n      return;\r\n    }\r\n    const { kakao } = window;\r\n    const currentMap = map ? map : createMap();\r\n    const ps = new kakao.maps.services.Places();\r\n    ps.keywordSearch(address, (data, status, pagination) =>\r\n      placesSearchCB(data, status, pagination, currentMap)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"map\">카카오맵 장소 검색</div>\r\n      <div className=\"container\">\r\n        <div className=\"search-box\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"address\"\r\n            ref={addressRef}\r\n            placeholder=\"주소를 입력하세요\"\r\n          />\r\n          <button id=\"searchButton\" onClick={handleSearch}>\r\n            검색\r\n          </button>\r\n        </div>\r\n        <div id=\"map\" ref={mapContainerRef}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KakaoMapSearch;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
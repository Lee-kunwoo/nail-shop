{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'../styles/kkomap.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const KakaoMapSearch=()=>{const[map,setMap]=useState(null);const[scriptLoaded,setScriptLoaded]=useState(false);const addressRef=useRef(null);const mapContainerRef=useRef(null);// 카카오맵 API 스크립트를 동적으로 로드합니다.\nuseEffect(()=>{if(!document.getElementById('kakao-map-script')){const script=document.createElement('script');script.id='kakao-map-script';script.src='//dapi.kakao.com/v2/maps/sdk.js?appkey=80d68b9c1c97f9edd72ef5e13725bb51&libraries=services';script.async=\"true\";script.onload=()=>setScriptLoaded(true);document.body.appendChild(script);}else{setScriptLoaded(true);}},[]);// 지도를 생성하는 함수\nconst createMap=()=>{if(!scriptLoaded){alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');return;}const{kakao}=window;const container=mapContainerRef.current;container.style.display='block';const options={center:new kakao.maps.LatLng(37.566826,126.9786567),level:5};const newMap=new kakao.maps.Map(container,options);setMap(newMap);newMap.relayout();return newMap;};// 검색 결과의 각 장소에 대해 마커를 생성합니다.\nconst displayMarker=(place,currentMap)=>{const{kakao}=window;const marker=new kakao.maps.Marker({map:currentMap,position:new kakao.maps.LatLng(place.y,place.x)});kakao.maps.event.addListener(marker,'click',function(){const infowindow=new kakao.maps.InfoWindow({zIndex:1});infowindow.setContent(`<div style=\"padding:5px;font-size:12px;\">${place.place_name}</div>`);infowindow.open(currentMap,marker);});};// 검색 결과를 처리하고 지도 범위를 설정합니다.\nconst placesSearchCB=(data,status,pagination,currentMap)=>{const{kakao}=window;if(status===kakao.maps.services.Status.OK){const bounds=new kakao.maps.LatLngBounds();for(let i=0;i<data.length;i++){displayMarker(data[i],currentMap);bounds.extend(new kakao.maps.LatLng(data[i].y,data[i].x));}currentMap.setBounds(bounds);currentMap.relayout();}else{alert('검색 결과가 없습니다.');}};// 검색 버튼 클릭 핸들러\nconst handleSearch=()=>{const address=addressRef.current.value.trim();if(!address){alert('주소를 입력하세요.');return;}if(!scriptLoaded){alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');return;}const{kakao}=window;const currentMap=map?map:createMap();const ps=new kakao.maps.services.Places();ps.keywordSearch(address,(data,status,pagination)=>placesSearchCB(data,status,pagination,currentMap));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"map\",children:\"\\uCE74\\uCE74\\uC624\\uB9F5 \\uC7A5\\uC18C \\uAC80\\uC0C9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address\",ref:addressRef,placeholder:\"\\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{id:\"searchButton\",onClick:handleSearch,children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"map\",ref:mapContainerRef})]})]});};export default KakaoMapSearch;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","KakaoMapSearch","map","setMap","scriptLoaded","setScriptLoaded","addressRef","mapContainerRef","document","getElementById","script","createElement","id","src","async","onload","body","appendChild","createMap","alert","kakao","window","container","current","style","display","options","center","maps","LatLng","level","newMap","Map","relayout","displayMarker","place","currentMap","marker","Marker","position","y","x","event","addListener","infowindow","InfoWindow","zIndex","setContent","place_name","open","placesSearchCB","data","status","pagination","services","Status","OK","bounds","LatLngBounds","i","length","extend","setBounds","handleSearch","address","value","trim","ps","Places","keywordSearch","children","className","type","ref","placeholder","onClick"],"sources":["C:/nailmall/src/pages/KakaoMapSearch.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport '../styles/kkomap.scss';\r\n\r\nconst KakaoMapSearch = () => {\r\n  const [map, setMap] = useState(null);\r\n  const [scriptLoaded, setScriptLoaded] = useState(false);\r\n  const addressRef = useRef(null);\r\n  const mapContainerRef = useRef(null);\r\n\r\n  // 카카오맵 API 스크립트를 동적으로 로드합니다.\r\n  useEffect(() => {\r\n    if (!document.getElementById('kakao-map-script')) {\r\n      const script = document.createElement('script');\r\n      script.id = 'kakao-map-script';\r\n      script.src = '//dapi.kakao.com/v2/maps/sdk.js?appkey=80d68b9c1c97f9edd72ef5e13725bb51&libraries=services';\r\n      script.async = \"true\";\r\n      script.onload = () => setScriptLoaded(true);\r\n      document.body.appendChild(script);\r\n    } else {\r\n      setScriptLoaded(true);\r\n    }\r\n  }, []);\r\n\r\n  // 지도를 생성하는 함수\r\n  const createMap = () => {\r\n    if (!scriptLoaded) {\r\n      alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');\r\n      return;\r\n    }\r\n    const { kakao } = window;\r\n    const container = mapContainerRef.current;\r\n    container.style.display = 'block';\r\n    const options = {\r\n      center: new kakao.maps.LatLng(37.566826, 126.9786567),\r\n      level: 5,\r\n    };\r\n    const newMap = new kakao.maps.Map(container, options);\r\n    setMap(newMap);\r\n    newMap.relayout();\r\n    return newMap;\r\n  };\r\n\r\n  // 검색 결과의 각 장소에 대해 마커를 생성합니다.\r\n  const displayMarker = (place, currentMap) => {\r\n    const { kakao } = window;\r\n    const marker = new kakao.maps.Marker({\r\n      map: currentMap,\r\n      position: new kakao.maps.LatLng(place.y, place.x),\r\n    });\r\n    kakao.maps.event.addListener(marker, 'click', function () {\r\n      const infowindow = new kakao.maps.InfoWindow({ zIndex: 1 });\r\n      infowindow.setContent(\r\n        `<div style=\"padding:5px;font-size:12px;\">${place.place_name}</div>`\r\n      );\r\n      infowindow.open(currentMap, marker);\r\n    });\r\n  };\r\n\r\n  // 검색 결과를 처리하고 지도 범위를 설정합니다.\r\n  const placesSearchCB = (data, status, pagination, currentMap) => {\r\n    const { kakao } = window;\r\n    if (status === kakao.maps.services.Status.OK) {\r\n      const bounds = new kakao.maps.LatLngBounds();\r\n      for (let i = 0; i < data.length; i++) {\r\n        displayMarker(data[i], currentMap);\r\n        bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\r\n      }\r\n      currentMap.setBounds(bounds);\r\n      currentMap.relayout();\r\n    } else {\r\n      alert('검색 결과가 없습니다.');\r\n    }\r\n  };\r\n\r\n  // 검색 버튼 클릭 핸들러\r\n  const handleSearch = () => {\r\n    const address = addressRef.current.value.trim();\r\n    if (!address) {\r\n      alert('주소를 입력하세요.');\r\n      return;\r\n    }\r\n    if (!scriptLoaded) {\r\n      alert('카카오맵 스크립트가 아직 로드되지 않았습니다.');\r\n      return;\r\n    }\r\n    const { kakao } = window;\r\n    const currentMap = map ? map : createMap();\r\n    const ps = new kakao.maps.services.Places();\r\n    ps.keywordSearch(address, (data, status, pagination) =>\r\n      placesSearchCB(data, status, pagination, currentMap)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"map\">카카오맵 장소 검색</div>\r\n      <div className=\"container\">\r\n        <div className=\"search-box\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"address\"\r\n            ref={addressRef}\r\n            placeholder=\"주소를 입력하세요\"\r\n          />\r\n          <button id=\"searchButton\" onClick={handleSearch}>\r\n            검색\r\n          </button>\r\n        </div>\r\n        <div id=\"map\" ref={mapContainerRef}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KakaoMapSearch;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}